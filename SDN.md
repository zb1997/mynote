> OVS：即OpenVSwitch，虚拟交换机。在初始化阶段，ap节点首先使用ovs创建一个网桥br0，然后从controller暴露的接口获取所有ap节点的信息，并根据该信息在br0中设置交换机端口，并与其他ap建立GRE隧道。也就是说，两两的ａｐ之间使用GRE隧道进行通信
> GRE：通用路由封装，一种可以在细虚拟点对点链路中封装多种网络层协议的隧道协议，在生产环境中vu你在非常多的ａｐ节点。ａｐ节点之间的公网ｉｐ可能存在不同的网段。因此需要使用ｇｒｅ将这些ａｐ节点封装在一个虚拟网段内，以便管理和路由。目前ｏｖｓｅｌａｙ网络使用的时ａｐ的公网ｉｐ而不是运维的私网ｉｐ，目的是减少对运维私网的依赖
> 策略路由：对于一个ａｐ节点，在初始化阶段会创建一个路由表１００，该路由表会把目的地址为其他网段的数据包转发到ｇｒｅ封装的虚拟网段中，此外，ａｐ节点还会使用ｉｐｔａｂｌｅｓ的ｍａｎｇｌｅ表。将收到的目的地址非本机的数据包都打上相应的标记，并且添加路由规则，确保被标记的数据包使用路由表１００
> Open Flow：是ｓｄｎ南向协议。ｃｏｎｔｒｏｌｌｅｒ与ａｐ　建立链接之后，会实时的更新流表·，以决定数据包的流向

[原网页](https://mp.weixin.qq.com/s?__biz=MjM5MTM3MzIzMg==&mid=209513316&idx=1&sn=e5dbd9a2ccccb88d0ee5c4d5790699c1#rd)

### 一、网络基础

#### 传统网络

1. 数据包组包过程
   1. 数据包经过传输层的TCP模块，加上TCP头部，加上端口信息
   2. TCP包出来之后，会经过IP模块，这个会选择使用模块网卡，加入对应的IP到IP头部，然后会加上mac头部
   3. mac头部也是在IP模块中加的，首先会从网卡的ROM中读取自己的MAC地址，然后查询ARP缓存是否有对端MAC。没有的话会通过ARP广播获取到对端的MAC地址，写入IP头部
   4. 网卡将IP包转换成电信号活着是光信号然后发送出去
2. 光电信号接入互联网，涉及到接入网的概念，一般是ADSL和FTTH
3. 互联网中解释各大运营商组成的大网
4. 冲突域：在同一个网络上大两个设备同时进行传输则会产生冲突，在网路内部数据分组所产生与发生冲突的这样一个区域被称为冲突域，所有共享介质环境都是一个冲突域，在共享环境中存在一定的冲突域是正常行为
5. 反向代理：在服务端前存在缓存服务器，可以作为前置机帮助降低网络和服务器的负载，提高访问效率，抓包中的via字段就是表示这个包经过了缓存服务器
6. 各个设备的由来和功能
   1. 网线：俩农田那个两个机器，和网卡、协议栈组成最小的网络单元
      1. 网线提供物理介质
      2. 网卡提供数据处理
      3. 协议栈提供沟通语言
   2. 中继器：补强信号，增加传输距离，一般只有两个口
   3. 集线器：多口中继器，工作在物理层，无法识别mac地址和ip地址，会将收到的包发送到所有的其他设备
   4. 网桥：链路层产品，能够识别mac地址并生成mac表。能够进行冲突域隔离，提高带宽的利用率
   5. 交换机：网桥的延申和升级，接口更加密集，采用专有硬件作转发，能够进行VLAN隔离，是一种局域网产品，一般用于本地通信，无法实现远程广域网通信
   6. 路由器：是一种网络层设备，基于ip寻址，采用路由表实现数据转发，主要用于来连接不同的局域网，实现广播域隔离，可用于远程通信，每次进行包转发的时候会将源mac地址转换成自己的mac地址
   7. 无线ac/ap：解决有线网络布线麻烦的问题，无线ap(access point)可以看成是带有无线功能的交换机或者路由器
   8. 防火墙：解决安全问题，是一种网络安全产品，对网路进行安全访问限制，防止黑客攻击，根据技术特点可以分为包过滤、应用代理、状态检测防火墙，根据产品形态可以分为软件、硬件。可以看作是有安全功能的路由器，一般位于网络边界
   9. 流量控制：主要解决网络拥挤问题，分为上网行为管理，负载均衡，链路优化等，更多关注流量和应用特征

### SDN网络

#### SDN诞生

1. 传统网络的问题：
   1. 管理和部署麻烦
   2. 分布式网络框架瓶颈凸显
      1. 每个节点独立计算
      2. 接力棒式的交互
      3. 网路体积膨胀，导致交互收敛时间过长
   3. 流控问题棘手
      1. 流量可视化困难
      2. 当前流控技术大多是静态分配带宽
   4. 无法按需，不可编程
2. software　defined　network![img](file:///C:/Users/Administrator/Documents/My Knowledge/temp/c48ed9bb-a5ff-4f5a-8318-7091c9b5bac8/128/index_files/c53a2d23820a47a1bba01723dfcb052f.png)
3. SDN最主要的三个特性：
   1. 网络可开放编程
   2. 控制平面和数据平面分离
   3. 逻辑上集中控制